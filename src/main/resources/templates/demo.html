<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Tables</title>
<style>
    .table-container {
        margin-bottom: 20px;
    }

    table {
        border-collapse: collapse;
        width: 100%;
    }

    th, td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>

<div id="container"></div>

	<script th:inline="javascript">
	    /*<![CDATA[*/
	        var jsonData = /*[[${jsonData}]]*/ '{}'; // Assuming jsonData is the data you want to pass from the controller
	        
	    /*]]>*/
	</script>
<!--<script>

    function createTable(data, parentElement) {
        var tableContainer = document.createElement('div');
        tableContainer.classList.add('table-container');

        var table = document.createElement('table');

        var header = table.createTHead();
        var row = header.insertRow();
        Object.keys(data).forEach(function(key) {
            var th = document.createElement('th');
            th.textContent = key;
            row.appendChild(th);
        });

        var tbody = document.createElement('tbody');
        table.appendChild(tbody);

        var row = tbody.insertRow();
        Object.values(data).forEach(function(value) {
            var cell = row.insertCell();
            if (typeof value === 'object') {
                createTable(value, cell);
            } else {
                cell.textContent = value;
            }
        });

        tableContainer.appendChild(table);
        parentElement.appendChild(tableContainer);
    }

    var container = document.getElementById('container');
    createTable(jsonData, container);
</script>-->

<script>
	
	function createTable(data, parentElement) {
		
		 Object.values(data).forEach(function(value) {
				//alert(value)
	            
		        
		        Object.values(value).forEach(function(key) {
					
					var tableContainer = document.createElement('div');
				        tableContainer.classList.add('table-container');
				
				        var table = document.createElement('table');
				
				        var header = table.createTHead();
				        var row = header.insertRow();
					
					Object.keys(key).forEach(function(k){
						
			            var th = document.createElement('th');
			            th.textContent = k;
			            row.appendChild(th);
			            
					});
					var tbody = document.createElement('tbody');
			        table.appendChild(tbody);
			
			        var row = tbody.insertRow();
			        Object.values(key).forEach(function(value) {
			            var cell = row.insertCell();
			            cell.textContent = value;
			        });		
					tableContainer.appendChild(table);
		        	parentElement.appendChild(tableContainer);
	        });
	            
	    });
	      
        
        //var tbody = document.createElement('tbody');
        //table.appendChild(tbody);

        /*var row = tbody.insertRow();
        Object.values(data).forEach(function(value) {
            var cell = row.insertCell();
            if (typeof value === 'object') {
                createTable(value, cell);
            } else {
                cell.textContent = value;
            }
        });*/


    }

    var container = document.getElementById('container');
    createTable(jsonData, container);
</script>

</body>
</html>