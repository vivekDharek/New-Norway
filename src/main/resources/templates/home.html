<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="ISO-8859-1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Search and Table</title>
	<link rel="stylesheet" type="text/css" href="style.css"> <!-- Link to separate CSS file -->
	
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
		integrity="sha384-eMNCOe7tC1doHpGoWe/6oMVemdAVTMs2xqW4mwXrXsW0L84Iytr2wi5v2QjrP/xp"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"
		integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/"
		crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	
</head>

<body>
	<div>
		<form th:action="@{/}" method="get">
			<input type="text" name="id" th:value="${id}" placeholder="Find by ID" size="50">
			<button type="submit" class="btn btn-info">Search</button>
			<button type="submit" class="btn btn-info">Reset</button>
		</form>
	</div>

	<script th:inline="javascript">
		/*<![CDATA[*/
		var jsonData = /*[[${jsonData}]]*/ '[]'; // Assuming jsonData is the data you want to pass from the controller

		/*]]>*/
	</script>

	<div id="tb-container">

	</div>

	<script>
		function createTable(data, parentElement) {

			Object.values(data).forEach(function (value) {
				//alert(value)
				var tableContainer = document.createElement('div');
				tableContainer.classList.add('table-container');

				var table = document.createElement('table');

				var header = table.createTHead();
				var row = header.insertRow();
				Object.keys(value).forEach(function (key) {
					//alert(key)//Attribute names

					var th = document.createElement('th');
					th.textContent = key;
					row.appendChild(th);
				});
				var tbody = document.createElement('tbody');
				table.appendChild(tbody);

				var row = tbody.insertRow();
				Object.values(value).forEach(function (k) {
					//alert(k)//Data for that attribute
					var cell = row.insertCell();
					cell.textContent = k;
				});
				tableContainer.appendChild(table);
				parentElement.appendChild(tableContainer);
			});
		}
		var container = document.getElementById('tb-container');
		createTable(jsonData, container);
	</script>

</body>

</html>
